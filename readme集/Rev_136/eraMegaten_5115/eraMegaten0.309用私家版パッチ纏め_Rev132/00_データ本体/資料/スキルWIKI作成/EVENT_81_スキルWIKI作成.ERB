
;イベントフラグ:80:0 = イベント閲覧チェック（未体験=0体験済=1）

;====================
;条件
;====================
@PLAYABLE_EVENT_81
RESULTS = スキルWIKI作成
	RETURN 1


;====================
;内容
;====================
@SHOPCOM_EVENT_81

	PRINTW 文章テスト
CALL 文章テスト_81

@文章テスト_81


CLEARLINE 6000

PRINTFORML 
PRINTFORML 鮪飴
PRINTFORML 鮪飴|番号|名前|種別|命中|威力|クリ率|攻撃回数|威力最大期待値|付与効果|消費|相性|分類|算出|射程|範囲|継承種類|継承|速度|ランク|説明|備考|
;******************************
PRINTFORML 鮪飴
PRINTFORML 鮪飴


FOR LOCAL, 1 ,3900
	SIF LOCAL % 100 == 1
		PRINTFORML 鮪飴
	;銃〜システム系はスキップ
	SIF LOCAL == 2101
		LOCAL = 2400
	;アイテム系はスキップ
	SIF LOCAL == 3001
		LOCAL = 3401
	TRYCCALLFORM SKILL_NAME_{LOCAL},-1
		;名前、番号
		PRINTFORM 鮪飴|{LOCAL}|%RESULTS%|
		;種別
		TRYCALLFORM SKILL_EFECT_{LOCAL}
		SELECTCASE RESULT
			CASE 1
				PRINTFORM 攻撃
			CASE 2
				PRINTFORM 回復
			CASE 3
				PRINTFORM 状態変化
			CASE 4
				PRINTFORM 特殊
			CASE 5
				PRINTFORM 状態回復
			CASEELSE
				PRINTFORM その他
		ENDSELECT
		PRINTFORM |
		RESULT = 0
		;命中
		TRYCALLFORM SKILL_HITRATE_{LOCAL},-1
		PRINTFORM {RESULT}|
		RESULT = 0
		;威力
		TRYCALLFORM SKILL_POWER_{LOCAL},-1
		PRINTFORM {RESULT}|
		LOCAL:1 = RESULT
		RESULT = 0
		;クリ率
		TRYCALLFORM SKILL_DAMAGETYPE_{LOCAL}
		SELECTCASE RESULT
			CASE 1
				TRYCCALLFORM SKILL_CRITICAL_RATE_{LOCAL}
					PRINTFORM {RESULT}
				CATCH
					PRINTFORM 5
				ENDCATCH
			CASEELSE
				PRINT 0
		ENDSELECT
		PRINTFORM |
		RESULT = 0
		LOCAL:4 = 0
		;攻撃回数
		TRYCCALLFORM SKILL_MINATTACKNUMBER_{LOCAL},-1
			PRINTFORM {RESULT}-
			LOCAL:2 = RESULT
			CALLFORM SKILL_MAXATTACKNUMBER_{LOCAL},-1
			PRINTFORM {RESULT}
			LOCAL:3 = RESULT
			TRYCCALLFORM SKILL_MAXATK_PER_{LOCAL},-1
				SIF LOCAL:3 > RESULT
					PRINTFORM ({RESULT})
				SIF LOCAL:3 > RESULT
					LOCAL:3 = RESULT
				SIF LOCAL:2 > RESULT
					LOCAL:2 = RESULT
				SIF LOCAL:2 < RESULT && LOCAL:3 > RESULT
					LOCAL:4 = RESULT
			CATCH
			ENDCATCH
		CATCH
		ENDCATCH
		PRINTFORM |
		RESULT = 0
		;威力最大期待値
		IF LOCAL:4 < 1
			PRINTFORM {LOCAL:1 * (LOCAL:2 + LOCAL:3) / 2}|
		ELSE
			LOCAL:5 = 0
			FOR LOCAL,0,(LOCAL:3 - LOCAL:2 + 1)
				IF LOCAL > (LOCAL:4 - LOCAL:2)
					LOCAL:5 += LOCAL:1 * (LOCAL:4 - LOCAL:2)
				ELSE
					LOCAL:5 += LOCAL:1 * LOCAL
				ENDIF
			NEXT
			PRINTFORM {LOCAL:5 / LOCAL + LOCAL:1 * LOCAL:2}|
		ENDIF
		RESULT = 0
		;付与効果
		TRYCALLFORM SKILL_ADDTIONAL_STATE_{LOCAL},-1
		IF RESULT > 0
			PRINTFORM %GET_STATE(RESULT)%/
			
			TRYCALLFORM SKILL_ADDTIONAL_TYPE_{LOCAL},-1
			PRINTFORM %GET_TYPE(RESULT)%~~
			
			TRYCALLFORM SKILL_ADDTIONAL_BASE_RATE_{LOCAL},-1
			PRINTFORM {RESULT}-
			
			TRYCALLFORM SKILL_ADDTIONAL_MAX_RATE_{LOCAL},-1
			PRINTFORM {RESULT}~~
		ENDIF
		RESULT = 0
		TRYCALLFORM SKILL_HP_ABSORBER_{LOCAL},-1
		IF RESULT < 0
			PRINTFORM 反動{ABS(RESULT)}％
		ELSEIF RESULT > 0
			PRINTFORM 吸収{RESULT}％
		ENDIF
		RESULT = 0
		PRINTFORM |
		;消費
		TRYCALLFORM SKILL_COSTTYPE_{LOCAL},-1
		LOCAL:1 = RESULT
		RESULT = 0
		TRYCALLFORM SKILL_COST_{LOCAL},-1
		PRINTFORM \@ LOCAL:1 == 2 ? HP{RESULT}％ # {RESULT} \@|
		;相性
		RESULT = -1
		TRYCALLFORM SKILL_TYPE_{LOCAL},-1
		IF RESULT == -1
			PRINTFORM 特殊|
		ELSE
			PRINTFORM %GET_TYPE(RESULT)%|
		ENDIF
		;分類
		TRYCALLFORM SKILL_DECIDE_TYPE_{LOCAL}
		SELECTCASE RESULT
			CASE 1
				PRINTFORM EXTRA
			CASE 2
				PRINTFORM MAGIC
			CASEELSE
				PRINT PASSIVE
		ENDSELECT
		PRINTFORM |
		RESULT = 0
		;算出
		TRYCALLFORM SKILL_DAMAGETYPE_{LOCAL}
		SELECTCASE RESULT
			CASE 1
				PRINTFORM 物理
			CASE 2
				PRINTFORM 魔法
			CASEELSE
				PRINT なし
		ENDSELECT
		PRINTFORM |
		RESULT = 0
		;射程
		TRYCALLFORM SKILL_RANGE_{LOCAL},-1
		SELECTCASE RESULT
			CASE 1
				PRINTFORM Ｓ
			CASE 2
				PRINTFORM Ｍ
			CASE IS > 2
				PRINTFORM Ｌ
		ENDSELECT
		PRINT |
		RESULT = 0
		;範囲:
		TRYCALLFORM SKILL_SPHERE_{LOCAL}
		SELECTCASE RESULT
			CASE 1
				PRINTFORM 単体
			CASE 2
				PRINTFORM 列
			CASE 3
				PRINTFORM 全体
			CASE 4
				PRINTFORM 敵味方
			CASEELSE
				PRINT なし
		ENDSELECT
		PRINT |
		RESULT = 0
		;継承種類
		TRYCALLFORM SKILL_SUCCESSION_TYPE_{LOCAL}
		PRINTFORM %GET_SUCCESSION(RESULT)%|
		RESULT = 0
		;継承
		TRYCALLFORM SKILL_RANK_{LOCAL}
		IF RESULT < 1 || RESULT > 15
			PRINTFORM ×
		ELSE
			TRYCCALLFORM 継承不能_{LOCAL}
				IF RESULT > 0
					PRINTFORM △
				ELSE
					PRINTFORM ○
				ENDIF
			CATCH
				PRINTFORM ○
			ENDCATCH
		ENDIF
		PRINT |
		RESULT = 0
		;速度
		TRYCALLFORM SKILL_SPEED_{LOCAL}
		PRINTFORM {RESULT}|
		RESULT = 0
		;ランク
		TRYCALLFORM SKILL_RANK_{LOCAL}
		PRINTFORM {RESULT}|
		RESULT = 0
		
		;　 説明文の表示
		TRYCALLFORM SKILL_EXPLAIN_{LOCAL}
		PRINTL |
		IF 1 == 0
			FOR LOCAL:1,1,4500
				;特定の種族を飛ばす処理
				SELECTCASE (LOCAL:1+99)/100
					CASE 0
						LOCAL:1 += 99
						CONTINUE
					CASE IS < 19
					CASE 40,42,44
					CASEELSE
						LOCAL:1 += 99
						CONTINUE
				ENDSELECT
				SIF EXISTCSV(LOCAL:1,0) == 0
					CONTINUE
				SIF CSVCFLAG(LOCAL:1,GETNUM(CFLAG,"全書召喚不可"),0) == 1
					CONTINUE
				
				LOCAL:3 = -1
				FOR LOCAL:2,1,FLAG:スキル数+1
					SIF CSVABL(LOCAL:1,GETNUM(ABL,"スキル"+ TOSTR(LOCAL:2)),0) == LOCAL
						LOCAL:3 = 0
					SIF LOCAL:3 > -1
						BREAK
				NEXT
				FOR LOCAL:2,1,21
					SIF CSVABL(LOCAL:1,GETNUM(ABL,"習得スキル"+ TOSTR(LOCAL:2)),0) == LOCAL
						LOCAL:3 = CSVABL(LOCAL:1,GETNUM(ABL,"習得LV"+ TOSTR(LOCAL:2)),0)
					SIF LOCAL:3 > -1
						BREAK
				NEXT
				IF LOCAL:3 == 0
					PRINTFORML 　　　[{LOCAL:1,4}] %CSVCALLNAME(LOCAL:1,0),20,LEFT% LV{CSVBASE(LOCAL:1,GETNUM(BASE,"LV"),0)}　　　初期習得
				ELSEIF LOCAL:3 > 0
					PRINTFORML 　　　[{LOCAL:1,4}] %CSVCALLNAME(LOCAL:1,0),20,LEFT% LV{CSVBASE(LOCAL:1,GETNUM(BASE,"LV"),0)}　　　習得LV:{LOCAL:3}
				ENDIF
				
			NEXT
		ENDIF
	CATCH
	ENDCATCH
NEXT
PRINTL 鮪飴
PRINTL 鮪飴
PRINTL 鮪飴
WAIT