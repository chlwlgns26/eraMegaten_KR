
;イベントフラグ:80:0 = イベント閲覧チェック（未体験=0体験済=1）

;====================
;条件
;====================
@PLAYABLE_EVENT_81
RESULTS = 装備WIKI作成
	RETURN 1


;====================
;内容
;====================
@SHOPCOM_EVENT_81

	PRINTW 文章テスト
CALL 文章テスト_81

@文章テスト_81
LOCAL:50 = FLAG:組織貢献度
FLAG:組織貢献度 = 9999999999999
CALL SET_ENEMY,7,4502,37
CALL SET_ENEMY,8,4503,37
CALL SET_ENEMY,9,4570,37


CLEARLINE 6000

PRINTFORML 
PRINTFORML P
FOR LOCAL,5000,5500
	IF ITEMNAME:LOCAL == "" || 魔晶装備(LOCAL)
		;PRINTFORML |{LOCAL}|空き|
		CONTINUE
	ELSEIF 改造装備(LOCAL)
		PRINTFORML P|{LOCAL}|%ITEMNAME:LOCAL%|
		CONTINUE
	ENDIF
	;No
	PRINTFORM P|{LOCAL}|
	;名称
	PRINTFORM %ITEMNAME:LOCAL%|
	;戦闘能力補正
	TRYCALLFORM 戦闘能力修正_{LOCAL}, 0
	SIF RESULT != 0
		PRINTFORM 攻撃:{RESULT}~~
	TRYCALLFORM 戦闘能力修正_{LOCAL}, 1
	SIF RESULT != 0
		PRINTFORM 命中:{RESULT}~~
	TRYCALLFORM 戦闘能力修正_{LOCAL}, 2
	SIF RESULT != 0
		PRINTFORM 防御:{RESULT}~~
	TRYCALLFORM 戦闘能力修正_{LOCAL}, 3
	SIF RESULT != 0
		PRINTFORM 回避:{RESULT}~~
	TRYCALLFORM 戦闘能力修正_{LOCAL}, 4
	SIF RESULT != 0
		PRINTFORM 魔威:{RESULT}~~
	TRYCALLFORM 戦闘能力修正_{LOCAL}, 5
	SIF RESULT != 0
		PRINTFORM 魔効:{RESULT}~~
	PRINT |
	;パラメータ
	FOR LOCAL:3,1,FLAG:基本能力数
		TRYCALLFORM 基本能力修正_{LOCAL},LOCAL:3
		SIF RESULT == 0
			CONTINUE
		SELECTCASE LOCAL:3
			CASE 1
		PRINTFORM 力:{RESULT}~~
			CASE 2
		PRINTFORM 知:{RESULT}~~
			CASE 3
		PRINTFORM 魔:{RESULT}~~
			CASE 4
		PRINTFORM 耐:{RESULT}~~
			CASE 5
		PRINTFORM 速:{RESULT}~~
			CASE 6
		PRINTFORM 運:{RESULT}~~
		ENDSELECT
	NEXT
	PRINT |
		FOR LOCAL:1 , 0 , FLAG:相性数
			TRYCALLFORM 防御相性_{LOCAL}, LOCAL:1
			IF RESULT != 100
				IF RESULT == 999
					PRINTFORM %GET_TYPE(LOCAL:1)%:反射~~
				ELSEIF RESULT == 50
					PRINTFORM %GET_TYPE(LOCAL:1)%:半減~~
				ELSEIF RESULT == 0
					PRINTFORM %GET_TYPE(LOCAL:1)%:無効~~
				ELSE
					PRINTFORM %GET_TYPE(LOCAL:1)%:{RESULT}~~
				ENDIF
			ENDIF
		NEXT
	PRINT |
	;異常耐性
	RESULT = 0
	TRYCALLFORM バステ耐性_{LOCAL}, 0
	IF RESULT == 100
		PRINTFORM 全バステ:200
	ELSE
		FOR LOCAL:1 ,1,FLAG:ステート数
			RESULT = 0
			TRYCALLFORM バステ耐性_{LOCAL}, LOCAL:1
			IF RESULT != 0
				IF RESULT < -99
					PRINTFORM %GET_STATE(LOCAL:1),8,LEFT%:無効~~
				ELSE
					PRINTFORM %GET_STATE(LOCAL:1),8,LEFT%:{100 + RESULT}~~
				ENDIF
			ENDIF
		NEXT
	ENDIF
	PRINT |
	;値段
	RESULT = 0
	TRYCCALLFORM 購入条件_{LOCAL}
		SIF RESULT > 0
			PRINTFORM ￥{ITEMPRICE:LOCAL}
	CATCH
	ENDCATCH
IF RESULT < 1
	TRYCCALLFORM EQUIP_EXCHANGE_{LOCAL}
		SIF RESULT > 0
			PRINTFORM MAG{ITEMPRICE:LOCAL}
	CATCH
	ENDCATCH
ENDIF
IF RESULT < 1
	PRINTFORM 売{ITEMPRICE:LOCAL/2}
ENDIF
	PRINT |

	LOCAL:1 = 0
	LOCAL:2 = 0
	LOCAL:3 = 0
	TRYCCALLFORM 装備追加スキル_{LOCAL},0
		IF RESULT > 0
			LOCAL:1 = RESULT
			TRYCALLFORM 装備追加スキル_{LOCAL},1
			IF RESULT > 0
				LOCAL:2 = RESULT
				TRYCALLFORM 装備追加スキル_{LOCAL},2
				IF RESULT > 0
					LOCAL:3 = RESULT
				ENDIF
			ENDIF
		ENDIF
	CATCH
	ENDCATCH
	IF LOCAL:1 > 0
		TRYCALLFORM SKILL_NAME_{LOCAL:1}
		PRINTFORM %RESULTS%~~
		IF LOCAL:2 > 0
			TRYCALLFORM SKILL_NAME_{LOCAL:2}
			PRINTFORM %RESULTS%~~
			IF LOCAL:3 > 0
				TRYCALLFORM SKILL_NAME_{LOCAL:3}
				PRINTFORM %RESULTS%
			ENDIF
		ENDIF
	ELSE
		TRYCCALLFORM 装備追加スキル_{LOCAL},0,(CHARANUM-3)
			IF RESULT > 0	
				LOCAL:1 = RESULT	
				TRYCALLFORM 装備追加スキル_{LOCAL},1,(CHARANUM-3)
				IF RESULT > 0	
					LOCAL:2 = RESULT	
					TRYCALLFORM 装備追加スキル_{LOCAL},2,(CHARANUM-3)
					IF RESULT > 0	
						LOCAL:3 = RESULT	
					ENDIF	
				ENDIF	
			ENDIF
			IF LOCAL:1 > 0
				PRINTFORM ＭＰ有
	    		TRYCALLFORM SKILL_NAME_{LOCAL:1}
	    		PRINTFORM ~~%RESULTS%
	    		IF LOCAL:2 > 0
	    			TRYCALLFORM SKILL_NAME_{LOCAL:2}
	    			PRINTFORM ~~%RESULTS%
	    			IF LOCAL:3 > 0
	    				TRYCALLFORM SKILL_NAME_{LOCAL:3}
	    				PRINTFORM ~~%RESULTS%
	    			ENDIF
	    		ENDIF
			ENDIF
		CATCH	
		ENDCATCH	
		RESULT = 0
		IF LOCAL:1 > 0
			LOCAL:1 = 0
			LOCAL:2 = 0
			LOCAL:3 = 0
			TRYCCALLFORM 装備追加スキル_{LOCAL},0,(CHARANUM-2)
				IF RESULT > 0	
					LOCAL:1 = RESULT	
					TRYCALLFORM 装備追加スキル_{LOCAL},1,(CHARANUM-2)
					IF RESULT > 0	
						LOCAL:2 = RESULT	
						TRYCALLFORM 装備追加スキル_{LOCAL},2,(CHARANUM-2)
						IF RESULT > 0	
							LOCAL:3 = RESULT	
						ENDIF	
					ENDIF	
				ENDIF
				IF LOCAL:1 > 0
					PRINTFORM ~~ＭＰ無
		    		TRYCALLFORM SKILL_NAME_{LOCAL:1}
		    		PRINTFORM ~~%RESULTS%
		    		IF LOCAL:2 > 0
		    			TRYCALLFORM SKILL_NAME_{LOCAL:2}
		    			PRINTFORM ~~%RESULTS%
		    			IF LOCAL:3 > 0
		    				TRYCALLFORM SKILL_NAME_{LOCAL:3}
		    				PRINTFORM ~~%RESULTS%
		    			ENDIF
		    		ENDIF
				ENDIF
			CATCH	
			ENDCATCH	
		ELSE
			TRYCCALLFORM 装備追加スキル_{LOCAL},0,(CHARANUM-1)
				IF RESULT > 0	
					LOCAL:1 = RESULT	
					TRYCALLFORM 装備追加スキル_{LOCAL},1,(CHARANUM-1)
					IF RESULT > 0	
						LOCAL:2 = RESULT	
						TRYCALLFORM 装備追加スキル_{LOCAL},2,(CHARANUM-1)
						IF RESULT > 0	
							LOCAL:3 = RESULT	
						ENDIF	
					ENDIF	
				ENDIF
				IF LOCAL:1 > 0
					PRINTFORM 半魔人
		    		TRYCALLFORM SKILL_NAME_{LOCAL:1}
		    		PRINTFORM ~~%RESULTS%
		    		IF LOCAL:2 > 0
		    			TRYCALLFORM SKILL_NAME_{LOCAL:2}
		    			PRINTFORM ~~%RESULTS%
		    			IF LOCAL:3 > 0
		    				TRYCALLFORM SKILL_NAME_{LOCAL:3}
		    				PRINTFORM ~~%RESULTS%
		    			ENDIF
		    		ENDIF
				ENDIF
			CATCH	
			ENDCATCH	
		ENDIF
	ENDIF
	PRINT |
	
	TRYCALLFORM 必要レベル_{LOCAL}
	PRINTFORM {RESULT}|
	
	TRYCALLFORM 装備条件説明_{LOCAL}
	PRINT |
	TRYCALLFORM 装備解説_{LOCAL}
	PRINT |
	
	TRYCCALLFORM WIKI備考欄_{LOCAL}
	CATCH	
	ENDCATCH	
	PRINTL |


NEXT
PRINTL P
PRINTL P
PRINTL P
CALL キャラ削除(CHARANUM-1)
CALL キャラ削除(CHARANUM-1)
CALL キャラ削除(CHARANUM-1)
WAIT
FLAG:組織貢献度 = LOCAL:50